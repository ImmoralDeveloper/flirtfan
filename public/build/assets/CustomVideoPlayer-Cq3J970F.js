function k(t){const e=t.querySelector(".custom-video"),v=t.querySelector(".play-pause"),n=v.querySelector(".icon"),r=t.querySelector(".progress-bar");t.querySelector(".current-time");const i=t.querySelector(".duration"),c=t.querySelector(".speed-control"),y=c.querySelector(".speed-btn"),P=y.querySelector(".speed-label"),f=c.querySelector(".speed-menu"),S=t.querySelector(".volume-control"),q=S.querySelector(".volume-btn"),l=q.querySelector(".icon"),u=S.querySelector(".volume-bar"),b=t.querySelector(".fullscreen");let a=1;v.onclick=()=>{e.paused?(e.play(),n.className="icon icon-pause",n.style.setProperty("--iconSizePercent",".5")):(e.pause(),n.className="icon icon-play",n.style.setProperty("--iconSizePercent",".5"))},e.onplay=()=>{n.className="icon icon-pause",n.style.setProperty("--iconSizePercent",".5")},e.onpause=()=>{n.className="icon icon-play",n.style.setProperty("--iconSizePercent",".5")},e.onclick=()=>{e.paused?e.play():e.pause()},e.ontimeupdate=()=>{r.value=e.currentTime,i.textContent=m(e.duration-e.currentTime)},e.onloadedmetadata=()=>{r.max=e.duration,i.textContent=m(e.duration)},r.oninput=()=>{e.currentTime=r.value,i.textContent=m(e.duration-e.currentTime)},y.onclick=o=>{o.stopPropagation(),c.classList.toggle("open")},f.querySelectorAll("li").forEach(o=>{o.onclick=s=>{s.stopPropagation(),e.playbackRate=o.dataset.speed,P.textContent=o.textContent,f.querySelectorAll("li").forEach(p=>p.classList.remove("active")),o.classList.add("active"),c.classList.remove("open")}}),document.addEventListener("click",o=>{c.contains(o.target)||c.classList.remove("open")}),u.value=e.volume,u.oninput=()=>{e.volume=u.value,d(),e.volume>0&&(a=e.volume)},q.onclick=()=>{e.volume>0?(a=e.volume,e.volume=0):e.volume=a||1,u.value=e.volume,d()};function d(){e.volume==0?(l.className="icon icon-volume-mute",l.style.setProperty("--iconSizePercent",".5")):(l.className="icon icon-volume",l.style.setProperty("--iconSizePercent",".5"))}d(),b.onclick=()=>{e.requestFullscreen&&e.requestFullscreen()},e.ondblclick=()=>{document.fullscreenElement===e?document.exitFullscreen():e.requestFullscreen&&e.requestFullscreen()};function m(o){const s=Math.floor(o/60),p=Math.floor(o%60).toString().padStart(2,"0");return`${s}:${p}`}new IntersectionObserver(o=>{o.forEach(s=>{!s.isIntersecting&&!e.paused&&e.pause()})},{threshold:.7}).observe(e),t.addEventListener("keydown",function(o){(o.code==="Space"||o.key===" ")&&(o.preventDefault(),e.paused?e.play():e.pause())}),t.tabIndex=0}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".custom-video-player").forEach(t=>{window.initCustomVideoPlayer(t)})});window.initCustomVideoPlayer=k;
