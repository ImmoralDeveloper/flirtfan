document.addEventListener("DOMContentLoaded",function(){const i=document.querySelector(".media-list");let r=1,n=!1,o=!0;function l(t){t.forEach(e=>{const c=document.createElement("li");let a="";e.type==="image"?a=`<a href="${e.url}" target="_blank"><img src="${e.url}" alt="Media Item"></a>`:e.type==="video"&&(a=`<a href="${e.url}" target="_blank"><img src="${e.thumbnail||"/img/media-video-thumb.png"}" alt="Video Thumbnail" class="media-video-thumb"><i class="icon icon-play"></i></a>`),c.innerHTML=a,i.appendChild(c)})}async function d(){if(!(n||!o)){n=!0;try{const e=await(await fetch(window.profileMediaLoadRoute,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({page:r})})).json();l(e.media),o=e.hasMore,r++}catch(t){console.log(t)}finally{n=!1}}}d(),window.addEventListener("scroll",function(){if(!o||n)return;i.getBoundingClientRect().bottom-window.innerHeight<50&&d()})});
